<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GRINDER - Autonomous Development Board</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <div class="header-left">
            <button class="sidebar-toggle" id="sidebarToggle" title="Show/hide projects">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                </svg>
            </button>
            <span class="logo-icon">&#9881;</span>
            <h1 class="logo">GRINDER</h1>
            <div class="selected-project-display" id="selectedProjectDisplay">
                <svg class="folder-icon-header" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.89 2 1.99 2H20c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"/>
                </svg>
                <span class="selected-project-name" id="selectedProjectName">All Projects</span>
            </div>
        </div>
        <div class="header-right">
            <!-- User Profile -->
            <div class="user-profile" id="userProfile">
                <div class="user-profile-trigger" id="userProfileTrigger">
                    <div class="user-avatar" id="userAvatar">
                        <!-- Default user silhouette SVG -->
                        <svg class="user-icon-default" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                    </div>
                    <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 10l5 5 5-5z"/>
                    </svg>
                </div>
                <div class="user-dropdown" id="userDropdown">
                    <div class="user-dropdown-header" id="userDropdownHeader">
                        <span class="user-dropdown-name" id="userDropdownName">Not connected</span>
                        <a class="user-dropdown-link hidden" id="userDropdownLink" href="#" target="_blank">View profile</a>
                    </div>
                    <div class="user-dropdown-divider"></div>
                    <button class="user-dropdown-item" id="btnConnectGithub">
                        <svg class="dropdown-item-icon" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"/>
                        </svg>
                        Connect GitHub
                    </button>
                    <button class="user-dropdown-item" id="btnOpenSettings">
                        <svg class="dropdown-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                        </svg>
                        Einstellungen
                    </button>
                    <div class="user-dropdown-divider"></div>
                    <button class="user-dropdown-item user-dropdown-item-danger hidden" id="btnDisconnectGithub">
                        <svg class="dropdown-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                        Abmelden
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar Overlay (for dimming background) -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-header">
                    <h3>Projekte</h3>
                    <div class="sidebar-actions">
                        <button id="btnRefreshProjects" class="btn btn-small btn-secondary" title="Projekte aktualisieren">&#8635;</button>
                        <button id="btnScanProjects" class="btn btn-small btn-secondary" title="Ordner scannen">Scan</button>
                        <button id="btnAddProject" class="btn btn-small btn-add" title="Projekt hinzuf&uuml;gen">+</button>
                    </div>
                </div>
                <div class="project-list">
                    <div class="project-item active" data-project-id="">
                        <span class="project-icon">&#128193;</span>
                        <span class="project-name">Alle Projekte</span>
                    </div>
                    <!-- Projects loaded dynamically -->
                </div>
            </div>
            <div class="sidebar-section">
                <div class="sidebar-header">
                    <h3>Task-Typen</h3>
                    <button id="btnAddTaskType" class="btn btn-small btn-add" title="Typ hinzuf&uuml;gen">+</button>
                </div>
                <div class="task-type-list">
                    <!-- Task types loaded dynamically -->
                </div>
            </div>
        </aside>

        <!-- Sidebar Resize Handle -->
        <div class="sidebar-resize-handle" id="sidebarResizeHandle"></div>

        <main class="board">
            <div class="column" data-status="backlog">
                <div class="column-header">
                    <h2>Backlog</h2>
                    <button class="btn btn-add" data-status="backlog">+</button>
                </div>
                <div class="tasks-container"></div>
            </div>

            <div class="column" data-status="progress">
                <div class="column-header">
                    <h2>In Progress</h2>
                </div>
                <div class="tasks-container"></div>
            </div>

            <div class="column" data-status="review">
                <div class="column-header">
                    <h2>Review</h2>
                </div>
                <div class="tasks-container"></div>
            </div>

            <div class="column" data-status="done">
                <div class="column-header">
                    <h2><span class="column-rocket" title="Tasks hier werden automatisch gemergt und gepusht">&#128640;</span> Done</h2>
                </div>
                <div class="tasks-container"></div>
            </div>

            <div class="column" data-status="blocked">
                <div class="column-header">
                    <h2>Blocked</h2>
                </div>
                <div class="tasks-container"></div>
            </div>
        </main>
    </div>


    <!-- Task Modal -->
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Task</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="taskForm">
                    <input type="hidden" id="taskId">

                    <div class="form-group">
                        <label for="taskTitle">Titel *</label>
                        <input type="text" id="taskTitle" required>
                    </div>

                    <div class="form-group">
                        <label for="taskDescription">Beschreibung (Markdown)</label>
                        <textarea id="taskDescription" rows="6" placeholder="Was soll implementiert werden?"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="taskCriteria">Akzeptanzkriterien</label>
                        <textarea id="taskCriteria" rows="4" placeholder="Wann ist der Task erledigt?"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="taskProject">Projekt</label>
                            <select id="taskProject">
                                <option value="">Kein Projekt</option>
                                <!-- Projects loaded dynamically -->
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="taskType">Task-Typ</label>
                            <select id="taskType">
                                <option value="">Kein Typ</option>
                                <!-- Task types loaded dynamically -->
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="taskPriority">Priorit&auml;t</label>
                            <select id="taskPriority">
                                <option value="1">Hoch</option>
                                <option value="2" selected>Mittel</option>
                                <option value="3">Niedrig</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="taskMaxIterations">Max. Iterationen</label>
                            <input type="number" id="taskMaxIterations" value="10" min="1" max="100">
                        </div>
                    </div>

                    <div class="form-group" id="projectDirGroup">
                        <label for="taskProjectDir">Projekt-Verzeichnis</label>
                        <div class="path-input-row">
                            <input type="text" id="taskProjectDir" placeholder="Leer = Standard verwenden">
                            <button type="button" id="btnBrowse" class="btn btn-secondary">Durchsuchen</button>
                        </div>
                    </div>

                    <!-- Branch info display (read-only, shown when task is running) -->
                    <div class="form-group hidden" id="branchInfoGroup">
                        <label>Aktueller Branch</label>
                        <div class="branch-display">
                            <svg class="branch-icon" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
                                <path d="M9.5 3.25a2.25 2.25 0 1 1 3 2.122V6A2.5 2.5 0 0 1 10 8.5H6a1 1 0 0 0-1 1v1.128a2.251 2.251 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.5 0v1.836A2.493 2.493 0 0 1 6 7h4a1 1 0 0 0 1-1v-.628A2.25 2.25 0 0 1 9.5 3.25Zm-6 0a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm8.25-.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM4.25 12a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z"/>
                            </svg>
                            <span id="taskBranch">-</span>
                        </div>
                    </div>
                </form>

                <!-- RALPH Controls (shown when task is running) -->
                <div id="ralphControls" class="ralph-controls hidden">
                    <h3>RALPH-Steuerung</h3>
                    <div class="ralph-buttons">
                        <button id="btnPause" class="btn btn-warning">Pause</button>
                        <button id="btnResume" class="btn btn-success hidden">Fortsetzen</button>
                        <button id="btnStop" class="btn btn-danger">Stopp</button>
                    </div>
                </div>

                <!-- Feedback Section (shown for all states except backlog) -->
                <div id="feedbackSection" class="feedback-section hidden">
                    <div class="form-group">
                        <label for="feedbackInput" id="feedbackLabel">Feedback an Claude:</label>
                        <div class="feedback-row">
                            <textarea id="feedbackInput" rows="2" placeholder="Nachricht eingeben..."></textarea>
                            <button id="btnFeedback" class="btn btn-primary">Senden</button>
                        </div>
                        <p class="help-text" id="feedbackHelp">Sendet Feedback an den laufenden Prozess</p>
                    </div>
                </div>

                <!-- Log Section -->
                <div id="logSection" class="log-section hidden">
                    <div class="log-header">
                        <h3>Log</h3>
                        <span id="iterationBadge" class="badge">Iteration 0</span>
                        <label class="auto-scroll-label">
                            <input type="checkbox" id="autoScroll" checked>
                            Auto-Scroll
                        </label>
                    </div>
                    <pre id="logOutput" class="log-output"></pre>
                </div>

                <!-- Error Display -->
                <div id="errorSection" class="error-section hidden">
                    <h3>Fehler</h3>
                    <p id="errorMessage"></p>
                </div>
            </div>

            <div class="modal-footer">
                <button id="btnDelete" class="btn btn-danger hidden">L&ouml;schen</button>
                <button id="btnSave" class="btn btn-primary">Speichern</button>
            </div>
        </div>
    </div>

    <!-- Folder Browser Modal -->
    <div id="folderModal" class="modal">
        <div class="modal-content folder-modal">
            <div class="modal-header">
                <h2>Ordner ausw&auml;hlen</h2>
                <button class="close-btn folder-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="folder-nav">
                    <button id="btnParentDir" class="btn btn-secondary btn-small">&uarr; H&ouml;her</button>
                    <input type="text" id="currentPath" class="path-display" readonly>
                </div>
                <div id="folderList" class="folder-list">
                    <!-- Folders will be loaded here -->
                </div>
                <div class="new-folder-section">
                    <div class="new-folder-row">
                        <input type="text" id="newFolderName" placeholder="Neuer Ordner Name...">
                        <button id="btnCreateFolder" class="btn btn-primary">Erstellen</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btnCancelFolder" class="btn btn-secondary">Abbrechen</button>
                <button id="btnSelectFolder" class="btn btn-primary">Ausw&auml;hlen</button>
            </div>
        </div>
    </div>

    <!-- Project Modal -->
    <div id="projectModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 id="projectModalTitle">Neues Projekt</h2>
                <button class="close-btn project-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="projectForm">
                    <input type="hidden" id="projectId">

                    <div class="form-group">
                        <label for="projectName">Name *</label>
                        <input type="text" id="projectName" required placeholder="Projektname">
                    </div>

                    <div class="form-group">
                        <label for="projectPath">Pfad *</label>
                        <div class="path-input-row">
                            <input type="text" id="projectPath" required placeholder="/pfad/zum/projekt">
                            <button type="button" id="btnBrowseProject" class="btn btn-secondary">Durchsuchen</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="projectDescription">Beschreibung</label>
                        <textarea id="projectDescription" rows="3" placeholder="Optionale Beschreibung"></textarea>
                    </div>

                    <!-- Branch Protection Rules -->
                    <div class="form-group">
                        <label>Branch-Schutzregeln</label>
                        <p class="help-text">Branches, auf die RALPH niemals pushen darf</p>
                        <div class="branch-rules-list" id="branchRulesList">
                            <!-- Rules loaded dynamically -->
                        </div>
                        <div class="add-rule-row">
                            <input type="text" id="newBranchRule" placeholder="z.B. main, master, release/*">
                            <button type="button" id="btnAddBranchRule" class="btn btn-secondary btn-small">Hinzuf&uuml;gen</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="btnDeleteProject" class="btn btn-danger hidden">L&ouml;schen</button>
                <button id="btnSaveProject" class="btn btn-primary">Speichern</button>
            </div>
        </div>
    </div>

    <!-- Scan Projects Modal -->
    <div id="scanModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Projekte scannen</h2>
                <button class="close-btn scan-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="scanBasePath">Basis-Verzeichnis</label>
                    <div class="path-input-row">
                        <input type="text" id="scanBasePath" placeholder="/pfad/zum/ordner">
                        <button type="button" id="btnBrowseScan" class="btn btn-secondary">Durchsuchen</button>
                    </div>
                    <p class="help-text">Scannt nach Git-Repositories in diesem Verzeichnis</p>
                </div>
                <div class="form-group">
                    <label for="scanDepth">Suchtiefe</label>
                    <select id="scanDepth">
                        <option value="2">2 Ebenen</option>
                        <option value="3">3 Ebenen</option>
                        <option value="4" selected>4 Ebenen</option>
                        <option value="5">5 Ebenen</option>
                        <option value="6">6 Ebenen</option>
                        <option value="8">8 Ebenen</option>
                    </select>
                </div>
                <div id="scanResults" class="scan-results hidden">
                    <h4>Gefundene Repositories:</h4>
                    <div id="scanResultsList" class="scan-results-list"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btnCancelScan" class="btn btn-secondary">Abbrechen</button>
                <button id="btnStartScan" class="btn btn-primary">Scannen</button>
                <button id="btnImportScan" class="btn btn-success hidden">Importieren</button>
            </div>
        </div>
    </div>

    <!-- Task Type Modal -->
    <div id="taskTypeModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 id="taskTypeModalTitle">Neuer Task-Typ</h2>
                <button class="close-btn tasktype-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="taskTypeForm">
                    <input type="hidden" id="taskTypeId">

                    <div class="form-group">
                        <label for="taskTypeName">Name *</label>
                        <input type="text" id="taskTypeName" required placeholder="z.B. Feature, Bug, Refactor">
                    </div>

                    <div class="form-group">
                        <label for="taskTypeColor">Farbe</label>
                        <div class="color-picker-row">
                            <input type="color" id="taskTypeColor" value="#58a6ff">
                            <span id="taskTypeColorPreview" class="color-preview" style="background-color: #58a6ff;"></span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="btnDeleteTaskType" class="btn btn-danger hidden">L&ouml;schen</button>
                <button id="btnSaveTaskType" class="btn btn-primary">Speichern</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content settings-modal">
            <div class="modal-header">
                <h2>Einstellungen</h2>
                <button class="close-btn settings-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="settings-tab active" data-tab="general">Allgemein</button>
                    <button class="settings-tab" data-tab="github">GitHub</button>
                    <button class="settings-tab" data-tab="tasks">Tasks</button>
                </div>

                <!-- General Settings -->
                <div class="settings-content active" id="settings-general">
                    <div class="form-group">
                        <label for="settingsProjectDir">Standard Projekt-Verzeichnis</label>
                        <div class="path-input-row">
                            <input type="text" id="settingsProjectDir" placeholder="/pfad/zum/projekt">
                            <button type="button" id="btnBrowseSettingsDir" class="btn btn-secondary">Durchsuchen</button>
                        </div>
                        <p class="help-text">Wird als Standard verwendet, wenn kein Projekt ausgew&auml;hlt ist</p>
                    </div>

                    <div class="form-group">
                        <label for="settingsClaudeCommand">Claude Command Pfad</label>
                        <input type="text" id="settingsClaudeCommand" placeholder="claude">
                        <p class="help-text">Pfad zum Claude CLI Befehl (Standard: claude)</p>
                    </div>

                    <div class="form-group">
                        <label for="settingsMaxIterations">Max. Iterationen (Standard)</label>
                        <input type="number" id="settingsMaxIterations" value="10" min="1" max="100">
                        <p class="help-text">Maximale Anzahl an RALPH-Iterationen f&uuml;r neue Tasks</p>
                    </div>
                </div>

                <!-- GitHub Settings -->
                <div class="settings-content" id="settings-github">
                    <div class="form-group">
                        <label for="settingsGithubToken">Personal Access Token (PAT)</label>
                        <div class="token-input-row">
                            <input type="password" id="settingsGithubToken" placeholder="ghp_xxxxxxxxxxxx">
                            <button type="button" id="btnToggleToken" class="btn btn-secondary btn-small">Zeigen</button>
                        </div>
                        <p class="help-text">
                            Token generieren bei <a href="https://github.com/settings/tokens" target="_blank">GitHub Settings</a>
                            mit 'repo' Berechtigung.
                        </p>
                    </div>

                    <div id="settingsGithubStatus" class="github-status hidden">
                        <span class="github-status-icon"></span>
                        <span class="github-status-text"></span>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="settingsAutoCommit">
                            Auto-Commit bei Task-Abschluss
                        </label>
                        <p class="help-text">Automatisch committen wenn ein Task in Done verschoben wird</p>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="settingsAutoPush">
                            Auto-Push nach Commit
                        </label>
                        <p class="help-text">Automatisch pushen nachdem &Auml;nderungen committed wurden</p>
                    </div>

                    <div class="form-group">
                        <label for="settingsDefaultBranch">Standard Branch</label>
                        <input type="text" id="settingsDefaultBranch" placeholder="main">
                        <p class="help-text">Branch der f&uuml;r neue Projekte verwendet wird</p>
                    </div>
                </div>

                <!-- Tasks Settings -->
                <div class="settings-content" id="settings-tasks">
                    <div class="form-group">
                        <label for="settingsDefaultPriority">Standard Priorit&auml;t</label>
                        <select id="settingsDefaultPriority">
                            <option value="1">Hoch</option>
                            <option value="2" selected>Mittel</option>
                            <option value="3">Niedrig</option>
                        </select>
                        <p class="help-text">Standard-Priorit&auml;t f&uuml;r neue Tasks</p>
                    </div>

                    <div class="form-group">
                        <label for="settingsAutoArchive">Auto-Archiv nach Tagen</label>
                        <input type="number" id="settingsAutoArchive" value="0" min="0" max="365">
                        <p class="help-text">Tasks in Done nach X Tagen automatisch archivieren (0 = deaktiviert)</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btnValidateSettings" class="btn btn-secondary">Token validieren</button>
                <button id="btnSaveSettings" class="btn btn-primary">Speichern</button>
            </div>
        </div>
    </div>

    <!-- GitHub Settings Modal -->
    <div id="githubModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>GitHub Settings</h2>
                <button class="close-btn github-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="githubToken">Personal Access Token (PAT)</label>
                    <input type="password" id="githubToken" placeholder="ghp_xxxxxxxxxxxx">
                    <p class="help-text">
                        Generate a token at <a href="https://github.com/settings/tokens" target="_blank">GitHub Settings</a>
                        with 'repo' scope.
                    </p>
                </div>
                <div id="githubStatus" class="github-status hidden">
                    <span class="github-status-icon"></span>
                    <span class="github-status-text"></span>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btnValidateGithub" class="btn btn-secondary">Validate</button>
                <button id="btnSaveGithub" class="btn btn-primary">Save</button>
            </div>
        </div>
    </div>

    <!-- Create GitHub Repo Modal -->
    <div id="createRepoModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Create GitHub Repository</h2>
                <button class="close-btn repo-close">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="createRepoProjectId">
                <div class="form-group">
                    <label for="repoName">Repository Name</label>
                    <input type="text" id="repoName" placeholder="my-project">
                </div>
                <div class="form-group">
                    <label for="repoDescription">Description (optional)</label>
                    <input type="text" id="repoDescription" placeholder="A brief description">
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="repoPrivate">
                        Make repository private
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btnCancelRepo" class="btn btn-secondary">Cancel</button>
                <button id="btnCreateRepo" class="btn btn-primary">Create Repository</button>
            </div>
        </div>
    </div>

    <!-- Deployment Confirmation Modal -->
    <div id="deployModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Deploy to GitHub</h2>
                <button class="close-btn deploy-close">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="deployTaskId">
                <p id="deployTaskTitle" class="deploy-task-title"></p>
                <div class="form-group">
                    <label for="deployCommitMessage">Commit Message</label>
                    <input type="text" id="deployCommitMessage" placeholder="Deploy: task title">
                </div>
                <div id="deployStatus" class="deploy-status hidden">
                    <div class="deploy-progress">
                        <span class="spinner"></span>
                        <span class="deploy-progress-text">Deploying...</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btnCancelDeploy" class="btn btn-secondary">Cancel</button>
                <button id="btnConfirmDeploy" class="btn btn-success">Deploy</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- WebSocket Reconnect Banner -->
    <div id="reconnectBanner" class="reconnect-banner hidden">
        <span>Verbindung verloren</span>
        <button id="btnReconnect" class="btn btn-small">Neu verbinden</button>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
